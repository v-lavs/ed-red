{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["/*\r\n* to include js file write: `//= include ./path-to-file`\r\n* */\r\n\r\n// CUSTOM SCRIPTS\r\n\r\nfunction destroySwiper(sliderInstance) {\r\n    if (sliderInstance instanceof Swiper && sliderInstance.initialized) {\r\n        sliderInstance.destroy(true, true);\r\n        console.log('destroy')\r\n    }\r\n}\r\n\r\n$(document).ready(function () {\r\n    //MOBILE MENU\r\n    const nav = $('.header__nav');\r\n\r\n    $('.btn-burger').click(function (e) {\r\n        e.preventDefault();\r\n        nav.addClass('open');\r\n        jQuery('.backdrop').fadeIn();\r\n    });\r\n\r\n    $('.btn-close, .backdrop').click(function (e) {\r\n        e.preventDefault();\r\n        nav.removeClass('open');\r\n        jQuery('.backdrop').fadeOut();\r\n    });\r\n\r\n    // VIDEO PLAY\r\n\r\n    const promotionVideo = $('#promotion-video').get(0);\r\n\r\n    if (promotionVideo) {\r\n        const playBtn = $('#playButton');\r\n\r\n        playBtn.click(function () {\r\n            promotionVideo.play();\r\n        });\r\n\r\n        promotionVideo.addEventListener('play', function () {\r\n            playBtn.hide();\r\n            promotionVideo.controls = true\r\n        });\r\n\r\n        promotionVideo.addEventListener('pause', function () {\r\n            playBtn.show();\r\n            promotionVideo.controls = false\r\n        });\r\n    }\r\n\r\n    //MODAL\r\n    $('.open-modal').on('click', function (e) {\r\n        e.preventDefault();\r\n        $('.backdrop, .popup').fadeIn(500);\r\n    });\r\n\r\n    $('.close-popup, .backdrop').on('click', function () {\r\n        $('.backdrop, .popup').fadeOut(500);\r\n    });\r\n\r\n//    SLIDER\r\n    const sliderInfo = new Swiper('.slider-info', {\r\n        loop: true,\r\n        spaceBetween: 24,\r\n        pagination: {\r\n            el: '.swiper-pagination',\r\n        },\r\n        navigation: {\r\n            nextEl: '.swiper-nav .swiper-button-next',\r\n            prevEl: '.swiper-nav .swiper-button-prev',\r\n        },\r\n    });\r\n    const sliderBlog = new Swiper('.blog-slider', {\r\n        spaceBetween: 20,\r\n        pagination: {\r\n            el: '.swiper-pagination',\r\n        },\r\n        navigation: {\r\n            nextEl: '.wrap-blog-slider .swiper-button-next',\r\n            prevEl: '.wrap-blog-slider .swiper-button-prev',\r\n        },\r\n        breakpoints: {\r\n            768: {\r\n                slidesPerView: 2,\r\n            },\r\n            1024: {\r\n                slidesPerView: 3,\r\n            }\r\n        }\r\n    });\r\n\r\n    let swiperRegistry = {}; // {id: swiperInstance}\r\n\r\n    function activateSwiper(id, element) {\r\n        swiperRegistry[id] = new Swiper(element, {\r\n            spaceBetween: 20,\r\n            pagination: {\r\n                el: '.swiper-pagination',\r\n            },\r\n            navigation: {\r\n                nextEl: '.swiper-nav .swiper-button-next',\r\n                prevEl: '.swiper-nav .swiper-button-prev',\r\n            },\r\n            breakpoints: {\r\n                768: {\r\n                    slidesPerView: 2,\r\n                },\r\n                1024: {\r\n                    slidesPerView: 3,\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function deactivateSwiper(id) {\r\n        if (swiperRegistry[id]) {\r\n            swiperRegistry[id].destroy(true, true);\r\n            delete swiperRegistry[id];\r\n        }\r\n    }\r\n\r\n    function checkSwipers() {\r\n        $(\".swiper\").each(function () {\r\n            const id = $(this).attr('id');\r\n            if (!id) return;\r\n\r\n            // const shouldBeActive = window.innerWidth <= 991;\r\n\r\n            // if (shouldBeActive && !swiperRegistry[id]) {\r\n            if ( !swiperRegistry[id]) {\r\n                activateSwiper(id, `#${id}`);\r\n            } else{\r\n                deactivateSwiper(id);\r\n            }\r\n\r\n            // if (!shouldBeActive && swiperRegistry[id]) {\r\n            //     deactivateSwiper(id);\r\n            // }\r\n        });\r\n    }\r\n\r\n    checkSwipers();\r\n\r\n    let resizeTimer;\r\n    $(window).on(\"resize\", function () {\r\n        clearTimeout(resizeTimer);\r\n        resizeTimer = setTimeout(checkSwipers, 200);\r\n    });\r\n\r\n    // TABS\r\n\r\n    $(\".tabs\").each(function () {\r\n        const tabs = $(this);\r\n        const links = tabs.find(\".tabs__nav-link\");\r\n        const wrapper = tabs.find(\".tabs__content-wrapper\");\r\n        const panes = tabs.find(\".tab-pane\");\r\n\r\n        function animateHeight(newPanel) {\r\n            const start = wrapper.height();\r\n            newPanel.show();\r\n            const target = newPanel.outerHeight();\r\n            newPanel.hide();\r\n\r\n            wrapper.height(start);\r\n            setTimeout(() => wrapper.height(target), 10);\r\n            setTimeout(() => wrapper.css(\"height\", \"auto\"), 310);\r\n        }\r\n\r\n        links.on(\"click\", function (e) {\r\n            e.preventDefault();\r\n\r\n            if ($(this).hasClass(\"active\")) return;\r\n\r\n            const id = $(this).attr(\"href\");\r\n            const pane = tabs.find(id);\r\n            const current = panes.filter(\".active\");\r\n\r\n            links.removeClass(\"active\");\r\n            $(this).addClass(\"active\");\r\n\r\n            animateHeight(pane);\r\n\r\n            current.removeClass(\"active\").hide();\r\n            pane.addClass(\"active\").show();\r\n\r\n            checkSwipers();\r\n        });\r\n\r\n        const first = panes.filter(\".active\");\r\n        wrapper.css(\"height\", first.outerHeight());\r\n        setTimeout(() => wrapper.css(\"height\", \"auto\"), 300);\r\n    });\r\n\r\n    //ACCORDION\r\n    $('#accordion .panel__heading').on('click', function () {\r\n        if ($(this).hasClass('open')) {\r\n            $(this).removeClass('open');\r\n            $(this)\r\n                .siblings('.panel-collapse')\r\n                .slideUp(500);\r\n            $('#accordion .panel__heading .open-panel')\r\n                .removeClass('open-panel:before')\r\n                .addClass('open-panel')\r\n        } else {\r\n            $('#accordion .panel__heading .open-panel')\r\n                .removeClass('open-panel:before')\r\n                .addClass('open-panel');\r\n            $(this)\r\n                .find('open-panel')\r\n                .removeClass('open-panel')\r\n                .addClass('open-panel:before');\r\n            $('#accordion .panel__heading').removeClass('open');\r\n            $(this).addClass('open');\r\n            $('.panel-collapse').slideUp(500);\r\n            $(this)\r\n                .siblings('.panel-collapse')\r\n                .slideDown(500)\r\n        }\r\n    });\r\n\r\n//    CUSTOM SELECT\r\n    $('.filter__select').select2({\r\n        width: '100%',\r\n        minimumResultsForSearch: -1,\r\n    });\r\n\r\n// FLOWERING CALENDAR\r\n//     let calendarSlider;\r\n//     const calendarSelector = $('.plant-calendar').get(0);\r\n//\r\n//     function handleResponsive() {\r\n//\r\n//         // DESTROY SLIDER INSTANCES\r\n//         if ($(window).outerWidth() > 768) {\r\n//             if (!calendarSlider && calendarSelector) {\r\n//                 calendarSlider = new Swiper(\".plant-calendar\", {\r\n//                     freeMode: true,\r\n//                     slidesPerView: 'auto',\r\n//                     observer: true,\r\n//                     observeParents: true,\r\n//                     scrollbar: {\r\n//                         el: \".swiper-scrollbar\",\r\n//                         draggable: true,\r\n//                         hide: false,\r\n//                         snapOnRelease: true,\r\n//                     },\r\n//                 });\r\n//             }\r\n//         } else {\r\n//             destroySwiper(calendarSlider);\r\n//             calendarSlider = null;\r\n//         }\r\n//     }\r\n//\r\n//     let resizeId;\r\n//\r\n//     handleResponsive();\r\n//\r\n//     window.addEventListener('resize', function () {\r\n//         clearTimeout(resizeId);\r\n//         resizeId = setTimeout(handleResponsive, 500);\r\n//     });\r\n    // const calendarWrapper = document.querySelector('.calendar-wrapper');\r\n    // const wrapper = document.querySelector('.swiper-scrollbar');\r\n    // (function syncDragWithSpan() {\r\n    //     const month = document.querySelector('.month-block');\r\n    //     const drag = document.querySelector('.swiper-scrollbar-drag');\r\n    //     const track = drag ? drag.parentElement : null;\r\n    //     const sliderEl = document.querySelector('.plant-calendar').swiper || window.calendarSlider || null; // try common refs\r\n    //\r\n    //     if (!month || !drag || !track) {\r\n    //         console.warn('syncDragWithSpan: missing elements', {month, drag, track});\r\n    //         return;\r\n    //     }\r\n    //\r\n    //     function update() {\r\n    //         const span = month.offsetWidth;\r\n    //         // set drag width visually â€” fallback; keep small padding for design if needed\r\n    //         drag.style.width = span + 'px';\r\n    //         // ensure track has expected layout\r\n    //         track.style.overflow = 'visible';\r\n    //         // update left to match active slide if swiper present\r\n    //         const trackMax = (track.offsetWidth - drag.offsetWidth) || 1;\r\n    //         if (sliderEl && sliderEl.activeIndex != null) {\r\n    //             const idx = sliderEl.activeIndex;\r\n    //             const left = Math.max(0, Math.min(trackMax, Math.round((idx / (sliderEl.slides.length - 1 || 1)) * trackMax)));\r\n    //             drag.style.transform = 'translate3d(' + left + 'px, 0, 0)';\r\n    //         }\r\n    //     }\r\n    //\r\n    //     window.addEventListener('load', update);\r\n    //     window.addEventListener('resize', () => setTimeout(update, 60));\r\n    //     // run now\r\n    //     update();\r\n    //\r\n    //     // ensure drag moves slides when user drags native drag (Swiper scroll)\r\n    //     // listen to Swiper scroll event if exists\r\n    //     if (sliderEl && sliderEl.on) {\r\n    //         sliderEl.on('scroll', () => {\r\n    //             const left = drag.offsetLeft;\r\n    //             const prog = left / (track.offsetWidth - drag.offsetWidth);\r\n    //             const index = Math.round(prog * (sliderEl.slides.length - 1));\r\n    //             if (sliderEl.activeIndex !== index) {\r\n    //                 sliderEl.slideTo(index, 0);\r\n    //             }\r\n    //         });\r\n    //     }\r\n    // })();\r\n\r\n\r\n});\r\n\r\n"],"file":"main.js"}